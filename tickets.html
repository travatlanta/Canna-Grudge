<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Tickets • CannaGrudge</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/assets/GrudgeCon.png" sizes="any" />
  <meta name="theme-color" content="#1a1a1d" />
  <style>
    :root{--bg:#1a1a1d; --panel:#232326; --text:#e8e8e8; --muted:#9d9d9d; --gold:#d7bf72; --gold-strong:#e2c56e; --border:#2d2d30; --cta:#c43a3a; --cta-hover:#d24a4a}
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text); font:16px/1.55 ui-sans-serif,system-ui,-apple-system,Segoe UI,Inter,Arial}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:720px;margin:0 auto;padding:0 16px}
    header{position:sticky;top:0;z-index:40;background:color-mix(in oklab,var(--bg) 92%, transparent); backdrop-filter:saturate(120%) blur(8px); border-bottom:1px solid var(--border)}
    .row{display:flex;align-items:center;justify-content:space-between;height:64px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:900}
    .brand img{width:28px;height:28px;border-radius:8px}
    h1{margin:16px 0 6px;font-size:22px;font-weight:1000}
    p.muted{margin:0 0 14px;color:var(--muted)}
    .list{display:grid;gap:12px}
    .card{display:grid;grid-template-columns:72px 1fr auto;gap:12px;align-items:center; background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:12px}
    .thumb{width:72px;height:72px;border-radius:12px;background:#111 url("/assets/hero-ring.jpg") center/cover no-repeat}
    .title{font-weight:900}
    .desc{color:var(--muted);font-size:14px;margin-top:2px}
    .price{font-weight:1000;color:var(--gold-strong)}
    .cta{grid-column:1/-1;margin-top:8px}
    .cta button{width:100%;padding:14px 18px;border:none;border-radius:12px;font-weight:900;color:#fff; background:var(--cta);box-shadow:0 8px 24px rgba(212,58,58,.22);cursor:pointer}
    .cta button:hover{background:var(--cta-hover)}
    .sticky{position:sticky;bottom:0;z-index:30;background:linear-gradient(180deg, rgba(26,26,29,0), rgba(26,26,29,1) 40%); padding:12px 0 14px}
    .bottom{display:flex;gap:10px}
    .ghost{flex:1;border:1px solid var(--border);background:transparent;color:#e8e8e8; padding:14px 18px;border-radius:12px;font-weight:900}
    .solid{flex:2;background:var(--gold);color:#111;font-weight:900;border:none;border-radius:12px;padding:14px 18px}
    @media(min-width:580px){ .card{grid-template-columns:88px 1fr auto} .thumb{width:88px;height:88px} }
  </style>
</head>
<body>
<header>
  <div class="wrap row">
    <a href="/" class="brand"><img src="/assets/GrudgeCon.png" alt=""><span>CannaGrudge</span></a>
    <nav><a href="/account">Account</a></nav>
  </div>
</header>

<main class="wrap" style="padding:18px 0 96px">
  <h1>Get Tickets</h1>
  <p class="muted">Pick your tier. Checkout opens on the next page.</p>

  <div class="list" id="tiers">
    <div class="card" data-sku="GA" data-name="General Admission" data-price="49">
      <div class="thumb"></div>
      <div><div class="title">General Admission</div><div class="desc">Access to vendors and bouts</div></div>
      <div class="price">$49</div>
      <div class="cta"><button>Buy GA</button></div>
    </div>

    <div class="card" data-sku="RING" data-name="Ringside" data-price="129">
      <div class="thumb"></div>
      <div><div class="title">Ringside</div><div class="desc">Reserved seating by the ring</div></div>
      <div class="price">$129</div>
      <div class="cta"><button>Buy Ringside</button></div>
    </div>

    <div class="card" data-sku="VIP4" data-name="VIP Table (4)" data-price="599">
      <div class="thumb"></div>
      <div><div class="title">VIP Table (4)</div><div class="desc">Premium table near stage + lounge access</div></div>
      <div class="price">$599</div>
      <div class="cta"><button>Buy VIP</button></div>
    </div>
  </div>
</main>

<div class="sticky">
  <div class="wrap bottom">
    <a class="ghost" href="/">Back</a>
    <button class="solid" id="checkout">Proceed to Checkout</button>
  </div>
</div>

<script>
  let choice = null;
  document.querySelectorAll('.card button').forEach(btn=>{
    btn.addEventListener('click',(e)=>{
      const card = e.target.closest('.card');
      choice = { sku: card.dataset.sku, name: card.dataset.name, price: Number(card.dataset.price) };
      localStorage.setItem('cg_pending', JSON.stringify(choice));
      document.getElementById('checkout').textContent = `Checkout • ${choice.name} $${choice.price}`;
    });
  });
  document.getElementById('checkout').addEventListener('click', ()=>{
    if(!choice){
      const first = document.querySelector('.card');
      choice = { sku:first.dataset.sku, name:first.dataset.name, price:Number(first.dataset.price) };
    }
    const tid = 'TKT_' + Math.random().toString(36).slice(2,10).toUpperCase();
    const order = { id: 'ORD_' + Date.now(), tickets:[{ id: tid, name: choice.name, price: choice.price, status:'active' }] };
    localStorage.setItem('cg_last_order', JSON.stringify(order));
    const all = JSON.parse(localStorage.getItem('cg_tickets')||'[]'); all.push(order.tickets[0]);
    localStorage.setItem('cg_tickets', JSON.stringify(all));
    location.href = '/account';
  });
</script>
</body>
</html>